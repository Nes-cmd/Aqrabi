(()=>{var e="assets/images/users/user-dummy-img.jpg",t="assets/images/users/multi-user.jpg",s=!1;document.querySelectorAll(".favourite-btn").forEach((function(e){e.addEventListener("click",(function(e){this.classList.toggle("active")}))}));var n=document.getElementsByClassName("user-chat");document.querySelectorAll(".chat-user-list li a").forEach((function(e){e.addEventListener("click",(function(e){n.forEach((function(e){e.classList.add("user-chat-show")}));var t=document.querySelector(".chat-user-list li.active");t&&t.classList.remove("active"),this.parentNode.classList.add("active")}))})),document.querySelectorAll(".user-chat-remove").forEach((function(e){e.addEventListener("click",(function(e){n.forEach((function(e){e.classList.remove("user-chat-show")}))}))}));GLightbox({selector:".popup-img",title:!1});var r="users-chat";function c(e){setTimeout((function(){var t=document.getElementById(e).querySelector("#chat-conversation .simplebar-content-wrapper")?document.getElementById(e).querySelector("#chat-conversation .simplebar-content-wrapper"):"",s=document.getElementsByClassName("chat-conversation-list")[0]?document.getElementById(e).getElementsByClassName("chat-conversation-list")[0].scrollHeight-window.innerHeight+335:0;s&&t.scrollTo({top:s,behavior:"smooth"})}),100)}c(r);var o=document.querySelector("#chatinput-form"),l=document.querySelector("#chat-input"),a=document.querySelector(".chat-input-feedback");function i(){var e=(new Date).getHours()>=12?"pm":"am",t=(new Date).getHours()>12?(new Date).getHours()%12:(new Date).getHours(),s=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes();return t<10?"0"+t+":"+s+" "+e:t+":"+s+" "+e}setInterval(i,1e3);var d=0;o&&o.addEventListener("submit",(function(e){e.preventDefault();var t=r,n=r,o=l.value;0===o.length?(a.classList.add("show"),setTimeout((function(){a.classList.remove("show")}),2e3)):(1==s?(g(n,o),s=!1):p(t,o),c(t)),l.value="",document.getElementById("close_toggle").click()})),document.querySelectorAll("#userList li").forEach((function(t){t.addEventListener("click",(function(){var s=t.querySelector(".text-truncate").innerHTML,n=t.querySelector(".avatar-xxs .userprofile").getAttribute("src");document.querySelector(".user-chat-topbar .text-truncate .username").innerHTML=s,document.querySelector(".profile-offcanvas .username").innerHTML=s,n?(document.querySelector(".user-chat-topbar .avatar-xs").setAttribute("src",n),document.querySelector(".profile-offcanvas .avatar-lg").setAttribute("src",n)):(document.querySelector(".user-chat-topbar .avatar-xs").setAttribute("src",e),document.querySelector(".profile-offcanvas .avatar-lg").setAttribute("src",e)),document.getElementById("users-conversation").querySelectorAll(".left .chat-avatar").forEach((function(t){n?t.querySelector("img").setAttribute("src",n):t.querySelector("img").setAttribute("src",e)}))}))})),document.querySelectorAll("#channelList li").forEach((function(s){s.addEventListener("click",(function(){var n=s.querySelector(".text-truncate").innerHTML;document.querySelector(".user-chat-topbar .text-truncate .username").innerHTML=n,document.querySelector(".profile-offcanvas .username").innerHTML=n,document.querySelector(".user-chat-topbar .avatar-xs").setAttribute("src",t),document.querySelector(".profile-offcanvas .avatar-lg").setAttribute("src",t),document.getElementById("users-conversation").querySelectorAll(".left .chat-avatar").forEach((function(t){t.querySelector("img").setAttribute("src",e)}))}))}));var u=document.querySelector(".chat-conversation-list");u.querySelectorAll(".copy-message").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".ctext-wrap").children[0]?e.closest(".ctext-wrap").children[0].children[0].innerText:"";navigator.clipboard.writeText(t)}))})),document.getElementById("copyClipBoard").style.display="none",document.querySelectorAll(".copy-message").forEach((function(e){e.addEventListener("click",(function(){document.getElementById("copyClipBoard").style.display="block",setTimeout((function(){document.getElementById("copyClipBoard").style.display="none"}),1e3)}))})),u.querySelectorAll(".delete-item").forEach((function(e){e.addEventListener("click",(function(){2==e.closest(".user-chat-content").childElementCount?e.closest(".chat-list").remove():e.closest(".ctext-wrap").remove()}))})),u.querySelectorAll(".chat-list").forEach((function(e){e.querySelectorAll(".delete-image").forEach((function(e){e.addEventListener("click",(function(){1==e.closest(".message-img").childElementCount?e.closest(".chat-list").remove():e.closest(".message-img-list").remove()}))}))}));var m=u.querySelectorAll(".reply-message"),y=document.querySelector(".replyCard"),f=document.querySelector("#close_toggle");m.forEach((function(e){e.addEventListener("click",(function(){s=!0,y.classList.add("show"),f.addEventListener("click",(function(){y.classList.remove("show")}));var t=e.closest(".ctext-wrap").children[0].children[0].innerText;document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=t;var n=document.querySelector(".user-chat-topbar .text-truncate .username").innerHTML,r=e.closest(".chat-list")?e.closest(".chat-list").classList.contains("left")?n:"You":n;document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=r}))}));var p=function(e,t){d++;var n=document.getElementById(e).querySelector(".chat-conversation-list");null!=t&&n.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+d+'" >                <div class="conversation-list">                    <div class="user-chat-content">                        <div class="ctext-wrap">                            <div class="ctext-wrap-content">                                <p class="mb-0 ctext-content">                                    '+t+'                                </p>                            </div>                            <div class="dropdown align-self-start message-box-drop">                                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                    <i class="ri-more-2-fill"></i>                                </a>                                <div class="dropdown-menu">                                    <a class="dropdown-item d-flex align-items-center justify-content-between reply-message" href="#" data-bs-toggle="collapse" data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between copy-message" href="#" id="copy-message-'+d+'">Copy <i class="bx bx-copy text-muted ms-2"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" id="delete-item-'+d+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                            </div>                        </div>                    </div>                    <div class="conversation-name">                        <small class="text-muted time">'+i()+'</small>                        <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                    </div>                </div>            </div>        </li>');var r=document.getElementById("chat-list-"+d);r.querySelectorAll(".delete-item").forEach((function(e){e.addEventListener("click",(function(){n.removeChild(r)}))})),r.querySelectorAll(".copy-message").forEach((function(e){e.addEventListener("click",(function(){var e=r.childNodes[1].firstElementChild.firstElementChild.firstElementChild.firstElementChild.innerText;navigator.clipboard.writeText(e)}))})),r.querySelectorAll(".copy-message").forEach((function(e){e.addEventListener("click",(function(){document.getElementById("copyClipBoard").style.display="block",setTimeout((function(){document.getElementById("copyClipBoard").style.display="none"}),1e3)}))})),r.querySelectorAll(".reply-message").forEach((function(e){e.addEventListener("click",(function(){var t=document.querySelector(".replyCard"),n=document.querySelector("#close_toggle"),r=e.closest(".ctext-wrap").children[0].children[0].innerText,c=document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerHTML;s=!0,t.classList.add("show"),n.addEventListener("click",(function(){t.classList.remove("show")}));var o=e.closest(".chat-list")?e.closest(".chat-list").classList.contains("left")?c:"You":c;document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=o,document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=r}))}))},g=function(e,t){var s=document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerHTML,n=document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText;d++;var r=document.getElementById(e).querySelector(".chat-conversation-list");null!=t&&(r.insertAdjacentHTML("beforeend",'<li class="chat-list right" id="chat-list-'+d+'" >                <div class="conversation-list">                    <div class="user-chat-content">                        <div class="ctext-wrap">                            <div class="ctext-wrap-content">                            <div class="replymessage-block mb-0 d-flex align-items-start">                        <div class="flex-grow-1">                            <h5 class="conversation-name">'+s+'</h5>                            <p class="mb-0">'+n+'</p>                        </div>                        <div class="flex-shrink-0">                            <button type="button" class="btn btn-sm btn-link mt-n2 me-n3 font-size-18">                            </button>                        </div>                    </div>                                <p class="mb-0 ctext-content mt-1">                                    '+t+'                                </p>                            </div>                            <div class="dropdown align-self-start message-box-drop">                                <a class="dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">                                    <i class="ri-more-2-fill"></i>                                </a>                                <div class="dropdown-menu">                                    <a class="dropdown-item d-flex align-items-center justify-content-between reply-message" href="#" data-bs-toggle="collapse"  data-bs-target=".replyCollapse">Reply <i class="bx bx-share ms-2 text-muted"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#" data-bs-toggle="modal" data-bs-target=".forwardModal">Forward <i class="bx bx-share-alt ms-2 text-muted"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between copy-message" href="#" id="copy-message-'+d+'">Copy <i class="bx bx-copy text-muted ms-2"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Bookmark <i class="bx bx-bookmarks text-muted ms-2"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between" href="#">Mark as Unread <i class="bx bx-message-error text-muted ms-2"></i></a>                                    <a class="dropdown-item d-flex align-items-center justify-content-between delete-item" id="delete-item-'+d+'" href="#">Delete <i class="bx bx-trash text-muted ms-2"></i></a>                            </div>                        </div>                    </div>                    <div class="conversation-name">                        <small class="text-muted time">'+i()+'</small>                        <span class="text-success check-message-icon"><i class="bx bx-check"></i></span>                    </div>                </div>            </div>        </li>'));var c=document.getElementById("chat-list-"+d);c.querySelectorAll(".delete-item").forEach((function(e){e.addEventListener("click",(function(){u.removeChild(c)}))})),c.querySelectorAll(".copy-message").forEach((function(e){e.addEventListener("click",(function(){document.getElementById("copyClipBoard").style.display="block",document.getElementById("copyClipBoardChannel").style.display="block",setTimeout((function(){document.getElementById("copyClipBoard").style.display="none",document.getElementById("copyClipBoardChannel").style.display="none"}),1e3)}))})),c.querySelectorAll(".reply-message").forEach((function(e){e.addEventListener("click",(function(){var t=e.closest(".ctext-wrap").children[0].children[0].innerText,s=document.querySelector(".user-chat-topbar .text-truncate .username").innerHTML;document.querySelector(".replyCard .replymessage-block .flex-grow-1 .mb-0").innerText=t;var n=e.closest(".chat-list")?e.closest(".chat-list").classList.contains("left")?s:"You":s;document.querySelector(".replyCard .replymessage-block .flex-grow-1 .conversation-name").innerText=n}))})),c.querySelectorAll(".copy-message").forEach((function(e){e.addEventListener("click",(function(){c.childNodes[1].children[1].firstElementChild.firstElementChild.getAttribute("id"),isText=c.childNodes[1].children[1].firstElementChild.firstElementChild.innerText,navigator.clipboard.writeText(isText)}))}))};new FgEmojiPicker({trigger:[".emoji-btn"],removeOnSelection:!1,closeButton:!0,position:["top","right"],preFetch:!0,dir:"assets/js/pages/plugins/json",insertInto:document.querySelector(".chat-input")});document.getElementById("emoji-btn").addEventListener("click",(function(){setTimeout((function(){var e=document.getElementsByClassName("fg-emoji-picker")[0];if(e){var t=window.getComputedStyle(e)?window.getComputedStyle(e).getPropertyValue("left"):"";t&&(t=(t=t.replace("px",""))-40+"px",e.style.left=t)}}),0)}))})();